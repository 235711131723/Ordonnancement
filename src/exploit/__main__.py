#!/usr/bin/env python3

import argparse
from exploit.task import Task
from exploit.instruction import Assign, Add, Sub
from exploit.system import System
from exploit.variable import Variable

def parse_args():
    parser = argparse.ArgumentParser()
    args = parser.parse_args()
    return args

def main():
    args = parse_args()

    """
    -------------
    T1 || T2:
        x = 10 ; y = 22 || z = 40
    -------------
    T3:
        x = 40
    -------------
    T4 || T5:
        x = 40 || y = 40
    xx || T6:
               || z = x + y
    """

    try:
        t1 = Task([
            Assign('x', 1)
        ])
        t2 = Task([
            Assign('y', 1)
        ], dependencies=[t1])
        t3 = Task([
            Assign('z', 1)
        ], dependencies=[t1])
        tSomme = Task([
            Add('x', 'y', 'z')
        ], name="Somme", dependencies=[t2, t3])

        s = System(tasks=Task.Tasks)
        s.draw('normal', True)
    except (RuntimeError, ValueError) as e:
        print('ERREUR :', e)
        print('ERREUR :', e.__doc__)

if __name__ == '__main__':
    main()